<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= form.title %></title>
        <!-- Bootstrap CSS -->

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
      <link
        rel="stylesheet"
        href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
        crossorigin="anonymous"
      />
    
      <link rel="icon" href="/assets/logo.svg" type="image/ico" />
    <link rel="stylesheet" href="../css/view.css">
</head>
<body>
    <div id="myModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <div class="sub-content text-center">
            <i class="far fa-check-circle" aria-hidden="true"></i>
            <p class="mt-2">Test has been submitted successfully.</p>
            <hr>
            <h4>Your score is: <span id="score"></span>%</h4>
          </div>
          
        </div>
      
      </div>
      <div id="errorModal" class="modal">
        <div class="modal-content">
          <span class="close"id="close-modal">&times;</span>
          <div class="sub-content text-center">
            <i class="far fa-exclamation-circle" aria-hidden="true"></i>
            <p class="mt-2">You are not allowed to leave the page.</p>
            <hr>
            <h4>Warnings left: <span id="warnings"></span></h4>
          </div>
          
        </div>
      
      </div>
    <div class="container">
      <div class="timer">
        <p id="hours"></p>
        <p id="mins"></p>
        <p id="secs"></p>
        <h2 id="end"></h2>
      </div>
        <form action="#" id="form">
            <div class="title text-center my-3 text-decoration-underline">
                <h1 id="top"><%= form.title %> </h1>
            </div>
            <div class="questions">
                <% form.questions.forEach((q,index) => { %>
                    <div class="question">
                        <div class="question-title">
                            <p>Question <%= index+1 %> </p>
                            <h4><%= q.title %> </h4>
                        </div>
                        <div class="options">
                            <% for( let i = 0; i < q.options.length; i++ ) { %>
                                <div class="option">                              
                                    <label class="option-container"><%= q.options[i] %>
                                        <input type="radio" name="question<%= index %>" required>
                                        <span class="checkmark"></span>
                                      </label>
                                </div>
                               
                            <% } %>
                        </div>
                        
                    </div>
                    <hr>
                <% }) %>

            </div>
            <div class="submit">
                <button type="submit" id="btn">Submit</button>
            </div>
        </form>
        
        
    </div>
    
    <script>
        
        // window.addEventListener("beforeunload", function (e) {
        //     e.preventDefault();
        //     e.returnValue = "";
        // });
        let answer=[];
    </script>
    <% for(let j=0; j<form.questions.length; j++) { %>
        <script>
         answer.push('<%-JSON.stringify(form.questions[j].correct)%>');
        </script>
      <%}%>
      <script>
    
        let answers=[]
        for(let i=0; i<answer.length; i++)
         answers.push(JSON.parse(answer[i]));
        console.log(answers);
      </script>
          <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
          <script>
            var firebaseConfig = {
              apiKey: "AIzaSyCZcGEuHYbLhS2tFqZgCEE8cP6255Df8sA",
              authDomain: "hackathon-td-e4281.firebaseapp.com",
              projectId: "hackathon-td-e4281",
              databaseURL: "https://hackathon-td-e4281-default-rtdb.firebaseio.com/",
              storageBucket: "hackathon-td-e4281.appspot.com",
              messagingSenderId: "564313977129",
              appId: "1:564313977129:web:e4aad11ae3c18b67038738",
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            var database = firebase.database();
          </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="../js/view.js"></script>

</body>
</html>